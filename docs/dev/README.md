# Building and Running the Code

```
./gradlew test
./gradlew check
./gradlew run
```

# IDE Setup

Format, cleanup and import ordering files are checked in to: 
https://github.com/triplea-game/triplea/tree/master/eclipse/format

## *Eclipse*
 Plugins:
  - [Buildship](https://github.com/eclipse/buildship/blob/master/docs/user/Installation.md)
  - [Gradle integration](https://marketplace.eclipse.org/content/buildship-gradle-integration)

Useful:
  - [EGit in Eclipse](http://www.eclipse.org/egit/) - with [tutorial](http://www.vogella.com/tutorials/EclipseGit/article.html)

Checkstyle:
 
The [Eclipse Checkstyle plugin](http://eclipse-cs.sourceforge.net) integrates Checkstyle into the Eclipse IDE and notifies you of violations in real time.
Installation instructions are available at the above website.  You should install the version of the plugin that matches the Checkstyle version used in the Gradle build (see the `checkstyle` configuration in `build.gradle`).

1. Open the Properties window for the TripleA project
    1. From the main menu: **Project > Properties**
    1. From the Package Explorer: Right click the project and select **Properties**
1. Select the **Checkstyle** node
1. Select the **Main** tab
1. Ensure the **Checkstyle active for this project** and **Use simple configuration** boxes are checked
1. Under **Simple** select the **TripleA** configuration you added in the workspace Preferences window above
1. Click **OK** to close the Properties window
1. Answer **Yes** to rebuild the project


## *Netbeans*
  - [Gradle plugin](http://plugins.netbeans.org/plugin/44510/gradle-support)

## *IntelliJ*

Plugins:
  - *Eclipse Code Formatter* 
    - configure in settings to pick up the eclipse xml formatter and import ordering files.
  - *checkstyle-IDEA* [plugin](https://github.com/jshiell/checkstyle-idea) 
    - after install finish configuration in: **Other Settings > Checkstyle** 
  - *Save Actions*
    - configure in settings to add 'final' to local variables and class variables.
  - Method ordering: ![keep_dependents_first](https://user-images.githubusercontent.com/12397753/27557429-72fb899c-5a6e-11e7-8f9f-59cc508ba86c.png)

# Team Communication

*Github Issues*: https://github.com/triplea-game/triplea/issues
- Primary means of communication, conversations are open and recorded for historical reference.
- Open, allows for team participation and task balancing

*Gitter*: https://gitter.im/triplea-game/social

Quick 1:1 messages, administrative informational broadcast messages. 
For example: "Restarting bot 15, looks to be on fire"
  

*Forum*: http://forums.triplea-game.org

Communication to the larger TripleA community. Feature and game changes discussions would belong here.


# Code Review 

### PR Guidelines
- describe functional changes
- describe what was tested
- describe refactoring that was done
- if UI changes were made, include screen shots giving an overview of how things look
- code contributors should test their updates quite thoroughly

### Code reviewer expectation:
- shall not "self-review" and "self-merge" their own work 

### Requirements for someone to have write access
- contribute some cod
- provide valuable code reviews
- sustained engagement over at least a few months

### PR Merge Guidelines

At least one code reviewer must:
- try out any functional changes
- do a thorough code check
Before merge:
- all comments questions should be answered/addressed

### Code Review Ordering
- Reviewers should start with the oldest PRs and work their way forward in time. Favor merging things in that order as well. The reason for the merge order is to make merge conflicts a bit more predictable, if you are the first PR in the queue, then there should be no merge conflicts. If 2nd, then in theory you would only have to worry about the one open PR request to cause merge conflicts.


# Versioning 

Simplified 3 number versioning system based on semantic versioning:

 
``` release.compatability.build_number```


**Release** - A version number used by the TripleA team for version partitioning. 
**compatability** - Incremented whenever backwards compatibility with previous version is lost
**Build** - auto-generated by the build system.


* Last discussed in: https://github.com/triplea-game/triplea/issues/1739

# Troubleshooting

Response to a frozen game problem, below are steps notes of what would be needed to debug such a problem:

  - launch the game from a console window
  - recreate the game freeze.
  - In a second console, "`kill -3`" the process id of the running game. As a one line that would be:
     - `ps -ef | grep java | grep GameRunner | awk '{print $2}' | xargs kill -3`
  - Go back to the first console, a lot of new text should have shown up. Kill the game (ctrl+c), the file: "`output.txt`" will have the debug data we want.

# [Checkstyle](http://checkstyle.sourceforge.net)

Build will fail if checkstyle violation is increased.


## Gradle

Checkstyle can be run with:

```
$ ./gradlew clean check
```

To run individually:

```
$ ./gradlew clean checkstyleMain checkstyleTest checkstyleIntegTest
```

Checkstyle reports can be found within the folder `build/reports/checkstyle`.

You are **strongly encouraged** to run the `check` task before submitting a PR.
